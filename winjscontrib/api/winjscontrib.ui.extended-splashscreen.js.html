<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>WinJS Contrib Source: winjscontrib.ui.extended-splashscreen.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	
	<link type="text/css" rel="stylesheet" href="styles/site.cosmo.css">
	
</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">WinJS Contrib</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#WinJSContrib">WinJSContrib</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Alerts.html">Alerts</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Bindings.html">Bindings</a>
						</li>
						
						<li>
							<a href="WinJSContrib.CrossPlatform.html">CrossPlatform</a>
						</li>
						
						<li>
							<a href="WinJSContrib.CrossPlatform.isMobile.html">isMobile</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Logging.html">Logging</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Logging.Appenders.html">Appenders</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Search.html">Search</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Search.Stemming.html">Stemming</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Search.Stemming.Op.html">Op</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Search.Stemming.StopWords.html">StopWords</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Templates.html">Templates</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.html">UI</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.Animation.html">Animation</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.DataForm.Converters.html">Converters</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.DataSources.html">DataSources</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.DataSources.Grouping.html">Grouping</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Utils.html">Utils</a>
						</li>
						
						<li>
							<a href="WinJSContrib.WinRT.html">WinRT</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="WinJSContrib.Logging.Appenders.ConsoleAppender.html">ConsoleAppender</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Logging.LoggerClass.html">LoggerClass</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Messenger.html">Messenger</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Messenger.SmartWorker.html">SmartWorker</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Search.Index.html">Index</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Search.IndexGroup.html">IndexGroup</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Search.IndexWorkerProxy.html">IndexWorkerProxy</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Search.Stemming.Pipeline.html">Pipeline</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.ChildViewFlyout.html">ChildViewFlyout</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.DataForm.html">DataForm</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.DataSources.DataSourceManager.html">DataSourceManager</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.EventTracker.html">EventTracker</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.ExtendedSplash.html">ExtendedSplash</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.FlipViewPager.html">FlipViewPager</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.FluentDOM.html">FluentDOM</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.FlyoutPage.html">FlyoutPage</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.GlobalProgress.html">GlobalProgress</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.GridControl.html">GridControl</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.HubControl.html">HubControl</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.MediaTrigger.html">MediaTrigger</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.MultiPassItem.html">MultiPassItem</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.MultiPassRenderer.html">MultiPassRenderer</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.PageControlNavigator.html">PageControlNavigator</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.SemanticListViews.html">SemanticListViews</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.SmartListLayout.html">SmartListLayout</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UPnP.UPnPDevice.html">UPnPDevice</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: winjscontrib.ui.extended-splashscreen.js</h1>
    
    <section>
        <article>
            <pre class="sunlight-highlight-javascript linenums">/* 
 * WinJS Contrib v2.0.3.0
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

/// &lt;reference path="winjscontrib.core.js" />
(function () {
    "use strict";

    var nav = WinJS.Navigation;

    WinJS.Namespace.define("WinJSContrib.UI", {
        ExtendedSplash: WinJS.Class.define(
            /** 
             * 
             * @class WinJSContrib.UI.ExtendedSplash 
             * @classdesc This control displays a custom splash screen. It is primarily focused on WinRT apps but it works quite well in cordova applications (in that case you must add WinJSContrib.ui.crossplatform.js)
             * @param {HTMLElement} element DOM element containing the control
             * @param {Object} options
             * @example
             * &lt;div data-win-control="WinJSContrib.UI.ExtendedSplash" data-win-options="{ text: 'extended splash screen control in action...' }">&lt;/div>
             */
            function ctor(element, options) {
                var ctrl = this;
                options = options || {};
                ctrl.element = element || document.createElement("div");

                /**
                 * animation for showing splash screen
                 * @field                * 
                 */
                ctrl.enterAnimation = options.enterAnimation || function () {
                    var ctrl = this;
                    return WinJSContrib.UI.Animation.fadeIn(ctrl.splashLoader, { duration: 500 });
                };

                /**
                 * animation for hiding splash screen
                 * @field            * 
                 */
                ctrl.exitAnimation = options.enterAnimation || function () {
                    var ctrl = this;
                    var prom1 = WinJSContrib.UI.Animation.fadeOut(ctrl.element.querySelector('#mcn-splashscreen-loader'), { duration: 500 });
                    var prom2 = WinJSContrib.UI.Animation.fadeOut(ctrl.element, { duration: 500, delay: 200 });

                    return WinJS.Promise.join([prom1, prom2]).then(function () {
                        ctrl.element.style.display = 'none';
                    });
                };

                ctrl.isVisible = false;
                WinJSContrib.UI.Application = WinJSContrib.UI.Application || {};
                WinJSContrib.UI.Application.splashscreen = ctrl;
                ctrl.element.className = 'mcn-splashscreen ' + ctrl.element.className;
                if (WinJSContrib.CrossPlatform &amp;&amp; WinJSContrib.CrossPlatform.crossPlatformClass)
                    WinJSContrib.CrossPlatform.crossPlatformClass(ctrl.element);
                ctrl.splashImageFile = options.image || '/images/splashscreen.png';

                if (!ctrl.element.innerHTML) {                    
                    ctrl.element.innerHTML = ctrl.defaultSplashContent(options.text || 'chargement en cours', options.description);
                }
                ctrl.textElement = ctrl.element.querySelector('.mcn-splashscreen-loader-text');
                ctrl.splashImage = ctrl.element.querySelector('#mcn-splashscreen-image');
                ctrl.splashLoader = ctrl.element.querySelector('#mcn-splashscreen-loader');
                ctrl.handleResizeBinded = ctrl.handleResize.bind(ctrl);
                ctrl.handleDismissedBinded = ctrl.handleDismissed.bind(ctrl);
            },

            /**
            * @lends WinJSContrib.UI.ExtendedSplash.prototype
            */
            {
                /** 
                 * build html content for splash screen
                 * @param {string} text text displayed on splash
                 * @returns {string} HTML content
                 */
                defaultSplashContent: function (text) {
                    if (WinJSContrib.CrossPlatform &amp;&amp; (WinJSContrib.CrossPlatform.isMobile.Android() || WinJSContrib.CrossPlatform.isMobile.iOS())) {
                        return '&lt;img id="mcn-splashscreen-image" src="' + this.splashImageFile + '" alt="Splash screen image" />' +
                            //'&lt;div id="mcn-splashscreen-description" style="display: none">' + (description || '') + '&lt;div>' +         
                            '&lt;div id="mcn-splashscreen-loader" style="opacity: 0">' +
                            '&lt;div class="cordova-ring">&lt;/div>' +
                            '&lt;div class="mcn-splashscreen-loader-text">' + (text || '') + '&lt;/div>' +
                            '&lt;div>';

                    }
                    else {
                        return '&lt;img id="mcn-splashscreen-image" src="' + this.splashImageFile + '" alt="Splash screen image" />' +
                               //'&lt;div id="mcn-splashscreen-description" style="display: none">' + (description || '') + '&lt;div>' +
                               '&lt;div id="mcn-splashscreen-loader" style="opacity: 0">' +
                                   '&lt;progress class="win-ring">&lt;/progress>' +
                                   '&lt;div class="mcn-splashscreen-loader-text">' + (text || '') + '&lt;/div>' +
                               '&lt;div>';
                    }
                },

                handleResize: function () {
                    this.setLocation();
                },

                handleDismissed: function (arg) {
                    //system splash screen is gone...
                    arg.target.removeEventListener("dismissed", this.handleDismissedBinded);
                },

                init: function (arg) {
                    var ctrl = this;

                    return WinJS.Promise.timeout().then(function () {
                        if (arg &amp;&amp; arg.detail &amp;&amp; arg.detail.splashScreen) {
                            ctrl.setLocation(arg.detail.splashScreen);
                        }
                        ctrl.element.style.display = '';
                    });
                },

                /**
                 * show splash screen during the execution of a promise. After the promise, splash screen will NOT auto-hide
                 * @param {WinJS.Promise} dataLoadPromise promise covered by splash screen
                 * @param {Object} arg application init arguments
                 * @returns {WinJS.Promise} completion promise
                 */
                show: function (dataLoadPromise, arg) {
                    var ctrl = this;

                    if (arg) {
                        ctrl.init(arg);
                    }

                    ctrl.splashLoader.style.opacity = 0;
                    ctrl.element.style.display = '';
                    ctrl.element.style.opacity = '';
                    WinJSContrib.UI.appbarsDisable();

                    return new WinJS.Promise(function (complete, error) {
                        setImmediate(function () {
                            window.addEventListener("resize", ctrl.handleResizeBinded, false);
                            ctrl.enterAnimation.bind(ctrl)();

                        });

                        WinJS.Promise.join([dataLoadPromise, WinJS.Promise.timeout(200)]).done(function () {
                            complete();
                        }, function () {
                            error();
                        });

                    });
                },

                setLocation: function (splash) {
                    var ctrl = this;
                    if (splash &amp;&amp; splash.imageLocation) {
                        ctrl.splashImage.style.position = 'absolute';
                        ctrl.splashImage.style.top = splash.imageLocation.y + "px";
                        ctrl.splashImage.style.left = splash.imageLocation.x + "px";
                        //ctrl.splashImage.style.height = splash.imageLocation.height + "px";
                        ctrl.splashImage.style.width = splash.imageLocation.width + "px";

                        ctrl.splashImage.style.position = 'absolute';
                        ctrl.splashLoader.style.top = (splash.imageLocation.y + splash.imageLocation.height + 20) + "px";
                        ctrl.splashLoader.style.left = splash.imageLocation.x + "px";
                    }
                    else {
                        ctrl.splashImage.style.position = '';
                        ctrl.splashImage.style.top = '';
                        ctrl.splashImage.style.left = '';
                        ctrl.splashImage.style.height = '';
                        ctrl.splashImage.style.width = '';

                        ctrl.splashImage.style.position = '';
                        ctrl.splashLoader.style.top = '';
                        ctrl.splashLoader.style.left = '';
                        ctrl.splashLoader.style.height = '';
                        ctrl.splashLoader.style.width = '';
                    }
                },

                /**
                 * hide splash screen
                 * @returns {WinJS.Promise} splash screen removal promise
                 */
                hide: function () {
                    var ctrl = this;
                    WinJSContrib.UI.appbarsEnable();
                    window.removeEventListener("resize", ctrl.handleResizeBinded);
                    return ctrl.exitAnimation.bind(ctrl)();
                }
            })
    });
})();
</pre>
        </article>
    </section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					by MCNEXT
					<br />
					
					
		<span class="copyright">
		copyright MCNEXT
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a>
		on Sun Apr 05 2015 23:50:42 GMT+0200 (Romance Daylight Time) using the <a href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<script src="scripts/sunlight.js"></script>
	<script src="scripts/sunlight.javascript.js"></script>
	<script src="scripts/sunlight-plugin.doclinks.js"></script>
	<script src="scripts/sunlight-plugin.linenumbers.js"></script>
	<script src="scripts/sunlight-plugin.menu.js"></script>
	<script src="scripts/jquery.min.js"></script>
	<script src="scripts/jquery.scrollTo.js"></script>
	<script src="scripts/jquery.localScroll.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>


	<script>  Sunlight.highlightAll({lineNumbers:true,  showMenu: true, enableDoclinks :true}); </script>

	<script>
		$( function () {
			$( "#toc" ).toc( {
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : 60
			} );
			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );

		} );
	</script>

	

</body>
</html>
