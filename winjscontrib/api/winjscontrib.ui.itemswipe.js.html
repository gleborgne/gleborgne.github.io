<!DOCTYPE html>

<html lang="en">
<head>
	<meta charset="utf-8">
	<title>WinJS Contrib Source: winjscontrib.ui.itemswipe.js</title>

	<!--[if lt IE 9]>
	<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
	<![endif]-->
	<link type="text/css" rel="stylesheet" href="styles/sunlight.default.css">

	
	<link type="text/css" rel="stylesheet" href="styles/site.cosmo.css">
	
</head>

<body>
<div class="container-fluid">
	<div class="navbar navbar-fixed-top ">
		<div class="navbar-inner">
			<a class="brand" href="index.html">WinJS Contrib</a>
			<ul class="nav">
				
				<li class="dropdown">
					<a href="namespaces.list.html" class="dropdown-toggle" data-toggle="dropdown">Namespaces<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="global.html#WinJSContrib">WinJSContrib</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Bindings.html">Bindings</a>
						</li>
						
						<li>
							<a href="WinJSContrib.CrossPlatform.html">CrossPlatform</a>
						</li>
						
						<li>
							<a href="WinJSContrib.CrossPlatform.isMobile.html">isMobile</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Logging.html">Logging</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Logging.Appenders.html">Appenders</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Logs.html">Logs</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Logs.Appenders.html">Appenders</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Search.html">Search</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Templates.html">Templates</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.html">UI</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.Animation.html">Animation</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.DataForm.Converters.html">Converters</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.DataForm.defaultBindingOptions.html">defaultBindingOptions</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.DataSources.html">DataSources</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.DataSources.Grouping.html">Grouping</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Utils.html">Utils</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Utils.ValueParsers.html">ValueParsers</a>
						</li>
						

					</ul>
				</li>
				
				<li class="dropdown">
					<a href="classes.list.html" class="dropdown-toggle" data-toggle="dropdown">Classes<b
						class="caret"></b></a>

					<ul class="dropdown-menu ">
						
						<li>
							<a href="WinJSContrib.Logging.Appenders.ConsoleAppender.html">ConsoleAppender</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Logging.LoggerClass.html">LoggerClass</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Logs.Appenders.BufferAppender.html">BufferAppender</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Logs.Appenders.ConsoleAppender.html">ConsoleAppender</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Logs.Logger.html">Logger</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Messenger.html">Messenger</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Messenger.SmartWorker.html">SmartWorker</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Search.Index.html">Index</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Search.IndexGroup.html">IndexGroup</a>
						</li>
						
						<li>
							<a href="WinJSContrib.Search.Stemming.Pipeline.html">Pipeline</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.AspectRatio.html">AspectRatio</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.ChildViewFlyout.html">ChildViewFlyout</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.DataForm.html">DataForm</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.DataSources.DataSourceManager.html">DataSourceManager</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.ElasticInput.html">ElasticInput</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.EventTracker.html">EventTracker</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.ExtendedSplash.html">ExtendedSplash</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.FlipSnap.html">FlipSnap</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.FlipViewPager.html">FlipViewPager</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.FluentDOM.html">FluentDOM</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.FlyoutPage.html">FlyoutPage</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.GlobalProgress.html">GlobalProgress</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.GridControl.html">GridControl</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.HubControl.html">HubControl</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.ItemSwipe.html">ItemSwipe</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.MediaTrigger.html">MediaTrigger</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.MultiPassItem.html">MultiPassItem</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.MultiPassRenderer.html">MultiPassRenderer</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.PageControlNavigator.html">PageControlNavigator</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.SemanticListViews.html">SemanticListViews</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UI.SmartListLayout.html">SmartListLayout</a>
						</li>
						
						<li>
							<a href="WinJSContrib.UPnP.UPnPDevice.html">UPnPDevice</a>
						</li>
						

					</ul>
				</li>
				
			</ul>
		</div>
	</div>

	<div class="row-fluid">

		
			<div class="span12">
				
				<div id="main">
					


		<h1 class="page-title">Source: winjscontrib.ui.itemswipe.js</h1>
    
    <section>
        <article>
            <pre class="sunlight-highlight-javascript linenums">ï»¿/* 
 * WinJS Contrib v2.1.0.6
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

(function () {
	'use strict';
	WinJS.Namespace.define("WinJSContrib.UI", {	
	    ItemSwipe: WinJS.Class.mix(WinJS.Class.define(
            /**
             * @classdesc 
             * enable cross swipe on list items to trigger actions by swiping item
             * @class WinJSContrib.UI.ItemSwipe
             * @param {HTMLElement} element DOM element containing the control
             * @param {Object} options
             */
            function ctor(element, options) {
	        var ctrl = this;
			this.element = element || document.createElement('DIV');
			options = options || {};
			this.element.winControl = this;
			this.element.classList.add('mcn-itemswipe');
			this.element.classList.add('win-disposable');
			this.minSwipe = 100;
			this.thresholdFactor = 3;
			this.hoverDelay = 600;
			this.faceCard = this.element.querySelector(".face");
			this.swipeToLeftCard = this.element.querySelector(".swipe-to-left");
			this.swipeToRightCard = this.element.querySelector(".swipe-to-right");

			WinJS.UI.setOptions(this, options);

			this.eventTracker = new WinJSContrib.UI.EventTracker();
			if (this.faceCard) {
			    this.swipeslide = new WinJSContrib.UI.SwipeSlide(this.faceCard, {
			        capturePointerOnDown: true,
                    touchOnly : true,
			        minSwipeDistance : ctrl.minSwipe
			    });

			    if (!ctrl.swipeToLeftCard) {
			        this.swipeslide.allowed.left = false;
			    }

			    if (!ctrl.swipeToRightCard) {
			        this.swipeslide.allowed.right = false;
			    }

			    this.eventTracker.addEvent(ctrl.element, "pointerenter", function (arg) {
			        if (arg.pointerType == "mouse") {
			            ctrl.faceCard.classList.add("mousehover");
			        }
			    }, false);

			    this.eventTracker.addEvent(ctrl.element, "pointerleave", function (arg) {
			        if (arg.pointerType == "mouse") {
			            setTimeout(function () {
			                ctrl.faceCard.classList.remove("mousehover");
			            }, 100);
			        } else {
			            ctrl.faceCard.classList.remove("mousehover");
			        }
			    }, false);

			    this.eventTracker.addEvent(this.swipeslide, "swipestart", function (arg) {
			        ctrl._processSwipeStart(arg);
			    });

			    this.eventTracker.addEvent(this.swipeslide, "swipeend", function (arg) {
			        ctrl._cleanState(arg);
			    });

			    this.eventTracker.addEvent(this.swipeslide, "swipe", function (arg) {
			        ctrl._processSwipe(arg);
			    });

			    this.eventTracker.addEvent(this.swipeslide, "swipeprogress", function (arg) {
			        ctrl._processSwipeProgress(arg);
			    });

			    this.eventTracker.addEvent(this.swipeslide, "invoked", function (arg) {
			        ctrl._processInvoked(arg);
			    });
			}

			
			
        },
        /**
         * @lends WinJSContrib.UI.ItemSwipe.prototype
         */
        {
		    /**
             * data item
             * @field
             */
			item: {
				get: function(){
				    return this._item;
				},
				set: function(val){
				    this._item = val;
				}
			},

		    /**
             * minimum swipe distance for accepting action
             * @field
             * @type string
             */
			minSwipe : {
			    get: function(){
			        return this._minSwipe;
			    },
			    set: function(val){
			        this._minSwipe = val;
			        if (this.swipeslide) {
			            this.swipeslide.minSwipeDistance = val;
			        }
			    }
			},

		    /**
             * minimum swipe distance (expressed as a proportion like 2 for 50%) to element size for accepting action
             * @field
             * @type string
             */
			thresholdFactor: {
			    get: function () {
			        return this._thresholdFactor;
			    },
			    set: function (val) {
			        this._thresholdFactor = val;
			        if (this.swipeslide) {
			            this.swipeslide.thresholdFactor = val;
			        }
			    }
			},

			_processSwipeProgress: function (arg) {
			    var ctrl = this;
			    if (arg.direction == "left") {
			        if (ctrl.swipeToRightCard) {
			            ctrl.swipeToRightCard.classList.remove("swiping");
			        }

			        if (ctrl.swipeToLeftCard) {
			            ctrl.swipeToLeftCard.classList.add("swiping");
			            if (arg.accept) {
			                ctrl.swipeToLeftCard.classList.add("accepted");
			            } else {
			                ctrl.swipeToLeftCard.classList.remove("accepted");
			            }
			        }
			    } else if (arg.direction == "right") {
			        if (ctrl.swipeToLeftCard) {
			            ctrl.swipeToLeftCard.classList.remove("swiping");
			        }

			        if (ctrl.swipeToRightCard) {
			            ctrl.swipeToRightCard.classList.add("swiping");
			            if (arg.accept) {
			                ctrl.swipeToRightCard.classList.add("accepted");
			            } else {
			                ctrl.swipeToRightCard.classList.remove("accepted");
			            }
			        }
			    }			    
			},

			_processSwipe: function (arg) {
			    var ctrl = this;
			    
			    ctrl._cleanState();
			    if (arg.direction == "left") {
			        WinJSContrib.Utils.triggerCustomEvent(ctrl.element, "itemswipeleft", true, false, { element: ctrl.element, item: ctrl.item });
			    } else if (arg.direction == "right") {
			        WinJSContrib.Utils.triggerCustomEvent(ctrl.element, "itemswiperight", true, false, { element: ctrl.element, item: ctrl.item });			        
			    }
			},

			_processSwipeStart: function (arg) {
			    var ctrl = this;
			    
			    ctrl._cleanState();
			},

			_cleanState : function(){
			    var ctrl = this;
			    
			    if (ctrl.swipeToLeftCard) {
			        ctrl.swipeToLeftCard.classList.remove("swiping");
			        ctrl.swipeToLeftCard.classList.remove("accepted");
			    }
			    if (ctrl.swipeToRightCard) {
			        ctrl.swipeToRightCard.classList.remove("swiping");
			        ctrl.swipeToRightCard.classList.remove("accepted");
			    }
			},

			_processInvoked: function (arg) {
			    var ctrl = this;
			    console.log("invoked");
			    WinJSContrib.Utils.triggerEvent(ctrl.element, "click", true, false);
			    WinJSContrib.Utils.triggerCustomEvent(ctrl.element, "itemswipeinvoked", true, false, { element: ctrl.element, item: ctrl.item });
			},

			dispose: function () {
			    if (this.eventTracker) {
			        this.eventTracker.dispose();
			    }
			    if (this.swipeslide) {
			        this.swipeslide.dispose();
			    }
			    WinJS.Utilities.disposeSubTree(this.element);
			    this.element = null;
			}
		}),
		WinJS.UI.DOMEventMixin,
		WinJS.Utilities.createEventProperties("itemswipeleft", "itemswiperight", "itemswipeinvoked"))
	});
})();
</pre>
        </article>
    </section>





				</div>

				<div class="clearfix"></div>
				<footer>
					
					by MCNEXT
					<br />
					
					
		<span class="copyright">
		copyright MCNEXT
		</span>
					<br />
					
		<span class="jsdoc-message">
		Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.3.0-alpha5</a>
		on Mon Feb 01 2016 12:46:12 GMT+0100 (Paris, Madrid) using the <a href="https://github.com/terryweiss/docstrap">DocStrap template</a>.
		</span>
				</footer>
			</div>

			
			<br clear="both">
		</div>

	</div>
	<script src="scripts/sunlight.js"></script>
	<script src="scripts/sunlight.javascript.js"></script>
	<script src="scripts/sunlight-plugin.doclinks.js"></script>
	<script src="scripts/sunlight-plugin.linenumbers.js"></script>
	<script src="scripts/sunlight-plugin.menu.js"></script>
	<script src="scripts/jquery.min.js"></script>
	<script src="scripts/jquery.scrollTo.js"></script>
	<script src="scripts/jquery.localScroll.js"></script>
	<script src="scripts/bootstrap-dropdown.js"></script>
	<script src="scripts/toc.js"></script>


	<script>  Sunlight.highlightAll({lineNumbers:true,  showMenu: true, enableDoclinks :true}); </script>

	<script>
		$( function () {
			$( "#toc" ).toc( {
				selectors   : "h1,h2,h3,h4",
				showAndHide : false,
				scrollTo    : 60
			} );
			$( "#toc>ul" ).addClass( "nav nav-pills nav-stacked" );
			$( "#main span[id^='toc']" ).addClass( "toc-shim" );

		} );
	</script>

	

</body>
</html>
